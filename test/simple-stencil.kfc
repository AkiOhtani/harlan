;; -*- scheme -*-
;;xfail

(module
  (fn main ()
    (let X (vector 1 2 3 4))
    (let X (kernel ((x X) (y (rotate X 1))) (+ (var x) (var y))))
    (assert (= (vector-ref X 0) 5))
    (assert (= (vector-ref X 1) 3))
    (assert (= (vector-ref X 2) 5))
    (assert (= (vector-ref X 3) 7))
    (return 0))
