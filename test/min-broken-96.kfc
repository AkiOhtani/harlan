;; -*- scheme -*-

(module
  (fn main ()
      (let B (vector
              (vector 17)))

      ;;; without the loop, the program doesn't always segfault
      (for (i 0 1000)
        (let row (kernel ((j (vector 0 1 2 3)))
                         ;; (* j 0) is because OpenCL doesn't let us
                         ;; have unused variables.
                         (vector-ref (vector-ref B 0) (* j 0)))))
      
      (return 0)))
